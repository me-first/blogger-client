(this["webpackJsonpreact-complete-guide"]=this["webpackJsonpreact-complete-guide"]||[]).push([[0],{102:function(e,t,n){e.exports={spinner:"LoadingSpinner_spinner__1IWco"}},130:function(e,t,n){},247:function(e,t,n){"use strict";n.r(t);var c=n(28),a=n.n(c),r=n(2),s=n(22),l=n(5),o=n.n(l),i=n(11),u=n(44),d=n.n(u),j=n(9),b="https://bloggerserver.herokuapp.com",p=new j.a,x=Object(s.b)({name:"request",initialState:{isLoading:!1,data:[],error:null},reducers:{requestSend:function(e){e.isLoading=!0},dataArrived:function(e,t){e.isLoading=!1,e.data=t.payload,e.error=null},checkError:function(e,t){e.isLoading=!1,e.error=t.payload}}}),m=x.actions,h=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},c=p.get("jwt");return function(){var a=Object(i.a)(o.a.mark((function a(r){var s;return o.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r(m.requestSend()),a.prev=1,a.next=4,d()({method:e,url:b+t,data:n,headers:{authorization:"Bearer ".concat(c)}});case 4:s=a.sent,r(m.dataArrived(s.data)),a.next=12;break;case 8:a.prev=8,a.t0=a.catch(1),console.log(a.t0.response.data),r(m.checkError(a.t0.response.data.message));case 12:case"end":return a.stop()}}),a,null,[[1,8]])})));return function(e){return a.apply(this,arguments)}}()},O=Object(s.b)({name:"form",initialState:{inputIsValid:!0,emailIsValid:!0,aboutIsValid:!0,passwordIsValid:!0},reducers:{validName:function(e,t){""!==t.payload?e.inputIsValid=!0:e.inputIsValid=!1},validAbout:function(e,t){""!==t.payload?e.aboutIsValid=!0:e.aboutIsValid=!1},validEmail:function(e,t){""!==t.payload&&t.payload.trim().includes("@")?e.emailIsValid=!0:e.emailIsValid=!1},validPassword:function(e,t){""!==t.payload&&t.payload.trim().length>=8?e.passwordIsValid=!0:e.passwordIsValid=!1}}}),f=O.actions,v=Object(s.b)({name:"auth",initialState:{token:null,isLoggedIn:!1,user:null},reducers:{login:function(e,t){e.token=t.payload.token,e.isLoggedIn=!!e.token,e.user=t.payload.user},logout:function(e,t){e.token=!1,e.isLoggedIn=!1}}}),g=v.actions,w=Object(s.a)({reducer:{request:x.reducer,form:O.reducer,auth:v.reducer}}),y=n(10),N=(n(130),n(1)),k=n.n(N),S=n(8),I=n(3),C=n(21),B=n(0),L=function(e){var t=e.className+" px-6 w-30 py-1 text-white border-2 border-white border-solid rounded-md text-sm active:shadow-lg";return Object(B.jsx)("button",{onClick:function(t){e.onClick(t)},className:t,children:e.children})},E=new j.a,F=function(){var e,t=Object(S.g)(),n=E.get("jwt"),c=JSON.parse(localStorage.getItem("user")),a=Object(N.useState)(!1),s=Object(I.a)(a,2),l=s[0],o=s[1],i=Object(r.c)((function(e){return e.auth.token}))||!!n,u=c,d=Object(r.b)(),j=null===u||void 0===u?void 0:u.photo,b=function(){E.remove("jwt",{path:"/"}),localStorage.removeItem("user"),setTimeout((function(){d(g.logout()),t.replace("/")}),500)};return Object(B.jsxs)("header",{className:"flex items-center justify-between h-10 bg-gray-700",children:[Object(B.jsx)(y.c,{to:"/",className:"ml-2 text-xl text-white",children:"Blogger"}),Object(B.jsx)("nav",{className:"".concat(i?"hidden":""," w-1/2 mx-2"),children:Object(B.jsxs)("ul",{className:"flex justify-evenly",children:[Object(B.jsx)("li",{className:"mr-1",children:Object(B.jsx)(y.c,{className:"px-4 py-1 text-white border-2 border-white border-solid rounded-md",to:"/login",children:"Login"})}),Object(B.jsx)("li",{children:Object(B.jsx)(y.c,{className:"px-4 py-1 text-gray-800 bg-white border-2 border-white border-solid rounded-md",to:"/signup",children:"Sign up"})})]})}),Object(B.jsx)("div",{className:"".concat(i?"":"hidden"," "),children:Object(B.jsxs)("nav",{className:"relative flex items-center",children:[Object(B.jsxs)("div",{onClick:function(){o((function(e){return!e}))},className:"flex items-center mr-4 text-white cursor-pointer ",children:[Object(B.jsx)(C.a,{cloudName:"ds9vpuvdm",secure:"true",publicId:j,type:"fetch",alt:"blog img",className:"w-10 h-10 mr-2 rounded-full"}),Object(B.jsx)("span",{children:null===u||void 0===u||null===(e=u.name)||void 0===e?void 0:e.split(" ")[0]})]}),Object(B.jsxs)("div",{className:"".concat(l?"block":"hidden"," absolute left-0 z-20 w-1/2 text-sm text-center text-white bg-gray-400 rounded-xl top-8"),children:[Object(B.jsx)(y.b,{to:"/my-profile",className:"inline-block p-1 hover:text-gray-900",children:"My Profile"}),Object(B.jsx)(y.b,{to:"/my-blogs",className:"inline-block p-1 hover:text-gray-900",children:"My Blogs"}),Object(B.jsx)("div",{onClick:b,className:"p-1 cursor-pointer hover:text-gray-900",children:"Logout"})]}),Object(B.jsx)("div",{className:"mr-2",children:Object(B.jsx)(L,{onClick:b,className:"text-gray-800 bg-white",children:"Logout"})})]})})]})},P=function(e){return Object(B.jsxs)(k.a.Fragment,{children:[Object(B.jsx)(F,{}),Object(B.jsx)("main",{children:e.children})]})},T=n.p+"static/media/lightbulb-1875247.6fee9008.jpg",V=new j.a,D=function(){var e=V.get("jwt"),t=Object(r.c)((function(e){return e.auth.isLoggedIn}))||!!e,n=Object(S.g)();return Object(B.jsx)("header",{children:Object(B.jsxs)("figure",{className:"relative",children:[Object(B.jsx)("img",{src:T,alt:"cover"}),Object(B.jsxs)("figcaption",{className:"absolute text-white top-20 left-4",children:[Object(B.jsx)("div",{className:"text-xl font-pacifico ",children:"Share your imense knowledge here"}),Object(B.jsx)("div",{className:"".concat(t?"hidden":""),children:Object(B.jsxs)("div",{className:"flex w-8/12 mt-4 justify-evenly",children:[Object(B.jsx)(y.b,{to:"/login",className:"link",children:"Login"}),Object(B.jsx)(y.b,{to:"/signup",className:"text-gray-800 bg-white link",children:"Sign up"})]})}),Object(B.jsx)("div",{className:"".concat(t?"":"hidden"),children:Object(B.jsxs)("div",{className:"flex justify-between mt-4",children:[Object(B.jsxs)("div",{onClick:function(){n.push("/blog-post")},className:"flex px-8 pt-1 text-gray-300 bg-white rounded-xl",children:[Object(B.jsx)("div",{className:"w-0.5 h-6 mr-1 bg-gray-700"}),Object(B.jsx)("span",{children:"Create your blog"})]}),Object(B.jsx)(y.b,{to:"/blog-post",className:"text-gray-800 bg-white link",children:"Create"})]})})]})]})})},A=d.a.create({baseURL:"https://bloggerserver.herokuapp.com/"}),R=new j.a,q=function(e){var t=Object(N.useState)(!1),n=Object(I.a)(t,2),c=n[0],a=n[1],r=Object(S.g)(),s=Object(S.h)().pathname,l=new Date(e.updatedAt).toLocaleDateString("en-uk",{day:"2-digit",month:"2-digit",year:"numeric"}),o=function(){r.push("/blogs/".concat(e.id))};return Object(B.jsxs)("div",{onClick:"/my-blogs"!==s?o:void 0,className:"relative w-11/12 p-2 mx-auto mt-4 bg-white shadow-lg rounded-xl",children:[Object(B.jsxs)("div",{className:"flex justify-between",children:[Object(B.jsx)("h2",{className:"text-xl font-base ",children:e.title}),Object(B.jsxs)("svg",{onClick:function(){a((function(e){return!e}))},xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"".concat("/my-blogs"===s?"":"hidden"," text-gray-400 fill-current feather feather-more-vertical cursor-pointer"),children:[Object(B.jsx)("circle",{cx:"12",cy:"12",r:"1"}),Object(B.jsx)("circle",{cx:"12",cy:"5",r:"1"}),Object(B.jsx)("circle",{cx:"12",cy:"19",r:"1"})]})]}),Object(B.jsxs)("div",{className:" cursor-pointer absolute ".concat(c?"":"hidden"," w-1/3 text-sm text-center text-white bg-gray-400 right-4 rounded-xl top-8"),children:[Object(B.jsx)("div",{onClick:function(){r.push("/update-blog/".concat(e.id))},className:"p-1 hover:text-gray-900",children:"Edit"}),Object(B.jsx)("div",{onClick:function(){var t=R.get("jwt");A.delete("/api/v1/blogs/".concat(e.id),{headers:{authorization:"Bearer ".concat(t)}}),setTimeout((function(){r.push("/")}),1500)},className:"p-1 hover:text-gray-900",children:"Delete"})]}),Object(B.jsxs)("div",{className:"flex justify-between",children:[Object(B.jsx)("p",{className:"text-gray-400",children:e.author}),Object(B.jsx)("p",{className:"text-gray-400",children:l})]}),Object(B.jsxs)("div",{children:[Object(B.jsxs)("p",{className:"mt-2 mb-2 text-gray-600",children:["".concat(e.about).slice(0,80),"..."]}),Object(B.jsx)(L,{onClick:o,className:"bg-gray-800",children:"Read more"})]})]})},U=function(e){var t=function(t){var n=t.target.textContent.toLowerCase();e.onSort(n)},n=function(t){var n=t.target.textContent.toLowerCase();"design"===n&&(n="ui-ux"),e.onFilter(n)};return Object(B.jsxs)(k.a.Fragment,{children:[Object(B.jsxs)("div",{className:"flex items-center overflow-x-scroll",children:[Object(B.jsx)(L,{onClick:n,className:"bg-gray-800 link",children:"MERN"}),Object(B.jsx)(L,{onClick:n,className:"bg-gray-800 link",children:"Technology"}),Object(B.jsx)(L,{onClick:n,className:"bg-gray-800 link",children:"Fiction"}),Object(B.jsx)(L,{onClick:n,className:"bg-gray-800 link",children:"Design"}),Object(B.jsx)(L,{onClick:n,className:"bg-gray-800 link",children:"Entertainment"}),Object(B.jsx)(L,{onClick:n,className:"bg-gray-800 link",children:"Sports"})]}),Object(B.jsxs)("div",{className:"flex items-center justify-evenly",children:[Object(B.jsx)("span",{children:"Sort: "}),Object(B.jsx)(L,{onClick:t,className:"mt-2 ml-3 bg-yellow-500 border-none",children:"New"}),Object(B.jsx)(L,{onClick:t,className:"mt-2 ml-3 bg-yellow-500 border-none",children:"Old"}),Object(B.jsx)(L,{onClick:t,className:"mt-2 ml-3 bg-yellow-500 border-none",children:"Popular"})]})]})},z=n(102),M=n.n(z),_=function(e){return Object(B.jsx)("div",{className:"flex items-center justify-center ".concat(e.updateClass?e.updateClass:"h-screen"," "),children:Object(B.jsx)("div",{className:"".concat(M.a.spinner)})})},J=function(){var e,t,n=Object(N.useState)(""),c=Object(I.a)(n,2),a=c[0],s=c[1],l=Object(N.useState)("-updatedAt"),o=Object(I.a)(l,2),i=o[0],u=o[1],d=Object(N.useState)(1),j=Object(I.a)(d,2),b=j[0],p=j[1],x=Object(r.c)((function(e){return e.request.isLoading})),m=Object(r.c)((function(e){return e.request.data})),O=Object(r.c)((function(e){return e.request.error})),f=Object(r.b)(),v=0===a.length?"":"&blogType=".concat(a),g="sort=-updatedAt";"new"===i&&(g="sort=-updatedAt"),"old"===i&&(g="sort=updatedAt"),"popular"===i&&(g="sort=-likes"),Object(N.useEffect)((function(){f(h("GET","/api/v1/blogs?".concat(g).concat(v,"&page=").concat(b,"&limit=5")))}),[f,v,g,b]);var w=null===m||void 0===m||null===(e=m.data)||void 0===e||null===(t=e.blogs)||void 0===t?void 0:t.map((function(e){return Object(B.jsx)(q,{id:e._id,author:e.author.name,title:e.title,updatedAt:e.updatedAt,about:e.about},e._id)}));return Object(B.jsxs)(P,{children:[Object(B.jsx)(D,{}),x&&Object(B.jsx)(_,{}),Object(B.jsx)("section",{className:"mt-2 ",children:Object(B.jsx)(U,{onFilter:function(e){s(e)},onSort:function(e){u(e)}})}),O&&Object(B.jsx)("p",{className:"mt-10 text-red-500",children:O}),Object(B.jsx)("section",{children:m&&w}),Object(B.jsxs)("section",{className:"flex justify-between mx-4 my-4 ",children:[Object(B.jsx)("button",{onClick:function(){b>1&&p((function(e){return e-1}))},className:"px-6 py-1 text-sm text-white bg-gray-800 cursor-pointer rounded-xl",children:"Prev"}),Object(B.jsx)("button",{onClick:function(){var e;(null===m||void 0===m||null===(e=m.data)||void 0===e?void 0:e.blogs.length)>=5&&p((function(e){return e+1}))},className:"px-6 py-1 text-sm text-white bg-gray-800 cursor-pointer rounded-xl",children:"Next"})]})]})},G=function(e){var t=e.image;return Object(B.jsx)(k.a.Fragment,{children:Object(B.jsx)("header",{children:Object(B.jsx)(C.a,{className:"mx-auto h-11/12",cloudName:"ds9vpuvdm",secure:"true",publicId:t,type:"fetch",alt:"blog img"})})})},W=function(e){var t=e.title,n=e.about,c=e.author,a=e.updatedAt,r=e.blogType;return Object(B.jsxs)("section",{className:"p-2 m-1 bg-white rounded-md",children:[Object(B.jsx)("div",{className:"text-center",children:Object(B.jsx)("h2",{className:"text-2xl font-semibold border-b-2",children:t})}),Object(B.jsxs)("div",{className:"flex items-center justify-between",children:[Object(B.jsx)("h3",{className:"text-lg",children:r}),Object(B.jsxs)("div",{className:"flex flex-col text-gray-500",children:[Object(B.jsx)("span",{children:c}),Object(B.jsx)("span",{children:new Date(a).toLocaleDateString("en-uk",{day:"2-digit",month:"numeric",year:"numeric"})})]})]}),Object(B.jsx)("div",{className:"mt-2 text-gray-600",children:Object(B.jsx)("p",{className:"text-justify",children:n})})]})},H=function(e){var t=e.userPhoto,n=e.userName,c=e.updatedAt,a=e.comment;return Object(B.jsxs)("div",{className:"flex items-center mx-4 mt-2 bg-gray-200 rounded-xl",children:[Object(B.jsx)(C.a,{className:"w-12 h-12 m-2 rounded-full",cloudName:"ds9vpuvdm",secure:"true",publicId:t,type:"fetch",alt:"blog img"}),Object(B.jsxs)("div",{className:"ml-2",children:[Object(B.jsxs)("div",{className:"flex items-center justify-between text-blue-500 w-60",children:[Object(B.jsx)("p",{children:n}),Object(B.jsx)("p",{className:"text-sm text-gray-500",children:new Date(c).toLocaleDateString("en-uk",{day:"2-digit",month:"2-digit",year:"numeric"})})]}),Object(B.jsx)("div",{children:a})]})]})},K=new j.a,Q=function(e){var t,n=Object(N.useState)(!1),c=Object(I.a)(n,2),a=c[0],r=c[1],s=Object(N.useState)(!1),l=Object(I.a)(s,2),u=l[0],d=l[1],j=Object(N.useState)(!1),b=Object(I.a)(j,2),p=b[0],x=b[1],m=Object(N.useState)(""),h=Object(I.a)(m,2),O=h[0],f=h[1],v=Object(N.useState)([]),g=Object(I.a)(v,2),w=g[0],y=g[1],S=Object(N.useState)(!1),C=Object(I.a)(S,2),L=C[0],E=C[1],F=Object(N.useState)(!1),P=Object(I.a)(F,2),T=P[0],V=P[1],D=Object(N.useRef)(),R=e.blogId,q=e.comments,U=e.likes,z=K.get("jwt");Object(N.useEffect)((function(){var e=function(){var e=Object(i.a)(o.a.mark((function e(){var t,n,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return V(!0),e.next=3,A.get("/api/v1/blogs/".concat(R,"/comments"),{headers:{authorization:"Bearer ".concat(z)}});case 3:c=e.sent,V(!1),y(null===c||void 0===c||null===(t=c.data)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.comments);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(a||L)&&e()}),[a,R,L,z]),Object(N.useEffect)((function(){var e=function(){var e=Object(i.a)(o.a.mark((function e(){var t,n,c,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.get("/api/v1/blogs/".concat(R,"/likes"),{headers:{authorization:"Bearer ".concat(z)}});case 2:c=e.sent,a=null===c||void 0===c||null===(t=c.data)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.likedBlog,x(!!a);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();try{R&&e()}catch(t){console.log(t.response.data)}}),[z,R]),Object(N.useEffect)((function(){var e=function(){var e=Object(i.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,A.delete("/api/v1/likes/".concat(O),{},{headers:{authorization:"Bearer ".concat(z)}});case 3:t=e.sent,console.log(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0.response.data);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();O&&!u&&e()}),[O,u,z]);var M=function(){var e=Object(i.a)(o.a.mark((function e(){var t,n,c,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,A.post("/api/v1/blogs/".concat(R,"/likes"),{},{headers:{authorization:"Bearer ".concat(z)}});case 3:a=e.sent,f(null===a||void 0===a||null===(t=a.data)||void 0===t||null===(n=t.data)||void 0===n||null===(c=n.newLike)||void 0===c?void 0:c._id),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0.response.data);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();u&&(U+=1),u&&M();var J=function(){var e=Object(i.a)(o.a.mark((function e(t){var n,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),n=D.current.value;try{c=A.post("/api/v1/blogs/".concat(R,"/comments"),{comment:n},{headers:{authorization:"Bearer ".concat(z)}}),console.log(c),D.current.value="",E(!0)}catch(a){console.log(a.response.data)}case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),G=null===w||void 0===w?void 0:w.map((function(e){return Object(B.jsx)(H,{comment:e.comment,userName:e.user.name,userPhoto:e.user.photo,updatedAt:e.updatedAt},e._id)}));return Object(B.jsxs)(k.a.Fragment,{children:[Object(B.jsx)("div",{children:Object(B.jsxs)("form",{onSubmit:J,className:"flex items-center justify-between mx-1",children:[Object(B.jsx)("textarea",{ref:D,className:"w-10/12 border-2 border-gray-400 border-solid h-7",type:"text",defaultValue:null===D||void 0===D||null===(t=D.current)||void 0===t?void 0:t.value,autoFocus:!0,minLength:1}),Object(B.jsx)("button",{className:"px-3 py-1 text-white bg-blue-500 rounded-lg cursor-pointer",children:"Post"})]})}),Object(B.jsxs)("div",{className:"flex items-center justify-between mx-4",children:[Object(B.jsxs)("div",{onClick:function(){d((function(e){return!e}))},className:"flex items-center cursor-pointer",children:[Object(B.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:" mr-2 fill-current feather feather-thumbs-up ".concat(u||p?"text-blue-600":"text-gray-400"),children:Object(B.jsx)("path",{d:"M14 9V5a3 3 0 0 0-3-3l-4 9v11h11.28a2 2 0 0 0 2-1.7l1.38-9a2 2 0 0 0-2-2.3zM7 22H4a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h3"})}),Object(B.jsx)("span",{className:"mt-1",children:U})]}),Object(B.jsxs)("div",{className:"text-blue-600 cursor-pointer",onClick:function(){r((function(e){return!e}))},id:"comments",children:[L?w.length:q," comments"]})]}),T&&Object(B.jsx)(_,{updateClass:"h-20"}),a&&G]})},X=function(){var e,t=Object(S.i)(),n=Object(r.b)(),c=Object(r.c)((function(e){return e.request.isLoading})),a=Object(r.c)((function(e){return e.request.data})),s=Object(r.c)((function(e){return e.request.error})),l=t.blogId,o=null===a||void 0===a||null===(e=a.data)||void 0===e?void 0:e.blog;return Object(N.useEffect)((function(){n(h("GET","/api/v1/blogs/".concat(l)))}),[n,l]),s?Object(B.jsx)(P,{children:Object(B.jsx)("p",{children:"Error finding blog"})}):Object(B.jsxs)(P,{children:[c&&Object(B.jsx)(_,{}),Object(B.jsx)(G,{image:null===o||void 0===o?void 0:o.image}),Object(B.jsx)(W,{title:null===o||void 0===o?void 0:o.title,author:null===o||void 0===o?void 0:o.author.name,blogType:null===o||void 0===o?void 0:o.blogType,updatedAt:null===o||void 0===o?void 0:o.updatedAt,about:null===o||void 0===o?void 0:o.about}),Object(B.jsx)("section",{children:Object(B.jsx)(Q,{blogId:null===o||void 0===o?void 0:o._id,likes:null===o||void 0===o?void 0:o.likes,comments:null===o||void 0===o?void 0:o.comments})})]})},Y=function(e){var t=Object(N.useState)(!0),n=Object(I.a)(t,2),c=n[0],r=n[1];Object(N.useEffect)((function(){setTimeout((function(){r(!1)}),1500)}),[]);var s=function(){var t=e.type;return Object(B.jsx)("div",{className:"".concat("success"===t?"bg-green-500":"bg-red-500"," flex items-center justify-center p-2 mx-auto "),children:Object(B.jsx)("p",{className:"text-sm text-white",children:e.children})})};return c||(s=function(){return Object(B.jsx)("div",{})}),Object(B.jsx)(k.a.Fragment,{children:a.a.createPortal(Object(B.jsx)(s,{}),document.getElementById("popup"))})},Z=new j.a,$=function(){var e,t=Object(S.g)(),n=Object(r.c)((function(e){return e.form.inputIsValid})),c=Object(r.c)((function(e){return e.form.emailIsValid})),a=Object(r.c)((function(e){return e.form.passwordIsValid})),s=Object(r.c)((function(e){return e.request.error})),l=Object(r.c)((function(e){return e.request.data})),o=Object(r.b)(),i=null===l||void 0===l?void 0:l.token,u=null===l||void 0===l||null===(e=l.data)||void 0===e?void 0:e.user;Object(N.useEffect)((function(){i&&u&&(Z.set("jwt",i,{path:"/",expires:new Date(Date.now()+7776e6)}),localStorage.setItem("user",JSON.stringify(u)),o(g.login({token:i,user:u})))}),[o,u,i]),Object(N.useEffect)((function(){i&&setTimeout((function(){t.replace("/")}),2500)}),[t,i]);var d=n&&c&&a,j=Object(N.useRef)(),b=Object(N.useRef)(),p=Object(N.useRef)(),x=Object(N.useRef)();return Object(B.jsxs)(k.a.Fragment,{children:[i&&Object(B.jsx)(Y,{type:"error",children:"Signed up successfully"}),s&&Object(B.jsx)(Y,{type:"error",children:s}),Object(B.jsxs)("form",{onSubmit:function(e){e.preventDefault(),d&&(console.log("Form is Valid"),o(h("POST","/api/v1/users/signup",{name:j.current.value,email:b.current.value,password:p.current.value,passwordConfirm:x.current.value})))},className:"flex flex-col w-10/12 mx-auto mt-44",children:[Object(B.jsx)("input",{onBlur:function(){var e=j.current.value;o(f.validName(e))},ref:j,className:"p-2 mb-2 rounded-lg",id:"name",type:"text",placeholder:"name"}),Object(B.jsx)("input",{onBlur:function(){var e=b.current.value;o(f.validEmail(e))},ref:b,className:"p-2 mb-2 rounded-lg",id:"email",type:"email",placeholder:"email"}),Object(B.jsx)("input",{onBlur:function(){var e=p.current.value;o(f.validPassword(e))},ref:p,className:"p-2 mb-2 rounded-lg",id:"password",type:"password",placeholder:"password"}),Object(B.jsx)("input",{onBlur:function(){var e=x.current.value;o(f.validPassword(e))},ref:x,className:"p-2 mb-2 rounded-lg",id:"password-confirm",type:"password",placeholder:"password confirm"}),!d&&Object(B.jsx)("p",{className:"text-red-500",children:"Form is not valid"}),Object(B.jsx)("button",{className:"text-white bg-gray-700",children:"Sign Up"})]})]})},ee=function(){return Object(B.jsx)(P,{children:Object(B.jsx)($,{})})},te=new j.a,ne=function(){var e,t=Object(S.g)(),n=Object(r.c)((function(e){return e.form.emailIsValid})),c=Object(r.c)((function(e){return e.form.passwordIsValid})),a=Object(r.c)((function(e){return e.request.data})),s=Object(r.c)((function(e){return e.request.error})),l=Object(r.b)(),o=null===a||void 0===a?void 0:a.token,i=null===a||void 0===a||null===(e=a.data)||void 0===e?void 0:e.user;console.log(s),Object(N.useEffect)((function(){i&&o&&(te.set("jwt",o,{path:"/",expires:new Date(Date.now()+7776e6)}),localStorage.setItem("user",JSON.stringify(i)),l(g.login({token:o,user:i})))}),[l,i,o]),Object(N.useEffect)((function(){o&&setTimeout((function(){t.replace("/")}),2e3)}),[t,o]);var u=n&&c,d=Object(N.useRef)(),j=Object(N.useRef)();return Object(B.jsxs)(k.a.Fragment,{children:[a.token&&Object(B.jsx)(Y,{type:"success",children:"Logged in successfully!"}),s&&Object(B.jsx)(Y,{type:"error",children:s}),Object(B.jsxs)("form",{onSubmit:function(e){e.preventDefault(),u&&(console.log("Form is valid"),l(h("POST","/api/v1/users/login",{email:d.current.value,password:j.current.value})))},className:"flex flex-col w-10/12 mx-auto mt-44",children:[Object(B.jsx)("input",{ref:d,className:"p-2 mb-2 rounded-lg",id:"email",type:"email",placeholder:"email",onBlur:function(){var e=d.current.value;l(f.validEmail(e))}}),Object(B.jsx)("input",{ref:j,className:"p-2 mb-2 rounded-lg",id:"password",type:"password",placeholder:"password",onBlur:function(){var e=j.current.value;l(f.validPassword(e))}}),!u&&Object(B.jsx)("p",{className:"text-red-500",children:"Form is not valid"}),Object(B.jsx)("button",{className:"text-white bg-gray-700",children:"Login"})]})]})},ce=function(){return Object(B.jsx)(P,{children:Object(B.jsx)(ne,{})})},ae=new j.a,re=function(){var e=Object(S.g)(),t=Object(N.useState)(0),n=Object(I.a)(t,2),c=n[0],a=n[1],s=Object(N.useState)(null),l=Object(I.a)(s,2),u=l[0],d=l[1],j=Object(N.useState)(null),b=Object(I.a)(j,2),p=b[0],x=b[1],m=Object(r.c)((function(e){return e.form.inputIsValid})),O=Object(r.c)((function(e){return e.form.aboutIsValid})),v=Object(r.c)((function(e){return e.request.error})),g=Object(N.useRef)(),w=Object(N.useRef)(),y=Object(N.useRef)(),k=Object(r.b)(),C=m&&O,E=function(){var e=Object(i.a)(o.a.mark((function e(t){var n,c,r,s,l,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=ae.get("jwt"),c=t.target.files[0],(r=new FormData).append("file",c),e.prev=5,e.next=8,A.post("/api/v1/upload",r,{headers:{authorization:"Bearer ".concat(n)},onUploadProgress:function(e){var t=e.loaded,n=e.total,c=Math.floor(100*t/n);c<100&&a(c)}});case 8:i=e.sent,x(null),a(100),d(null===i||void 0===i||null===(s=i.data)||void 0===s||null===(l=s.data)||void 0===l?void 0:l.url),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(5),console.log(e.t0.response),x(e.t0.response.data.message);case 18:case"end":return e.stop()}}),e,null,[[5,14]])})));return function(t){return e.apply(this,arguments)}}(),F=function(t){if(t.preventDefault(),C){console.log("Form is valid");var n=g.current.value;"design"===n&&(n="ui-ux");var c=w.current.value,a=y.current.value,r=null;u&&(r=u),k(h("POST","/api/v1/blogs",{blogType:n,title:c,about:a,image:r})),setTimeout((function(){e.replace("/")}),2e3)}};return Object(B.jsxs)("form",{onSubmit:F,className:"w-10/12 mx-auto mt-2",children:[v&&Object(B.jsx)("p",{className:"text-red-500",children:v}),Object(B.jsxs)("div",{children:[Object(B.jsx)("label",{htmlFor:"type",children:"Blog Type: "}),Object(B.jsxs)("select",{ref:g,id:"type",children:[Object(B.jsx)("option",{value:"technology",children:"Technology"}),Object(B.jsx)("option",{value:"mern",children:"MERN"}),Object(B.jsx)("option",{value:"design",children:"Design"}),Object(B.jsx)("option",{value:"sports",children:"Sports"}),Object(B.jsx)("option",{value:"entertainment",children:"Entertainment"}),Object(B.jsx)("option",{value:"fiction",children:"Fiction"})]})]}),Object(B.jsxs)("div",{className:"flex flex-col",children:[Object(B.jsx)("label",{htmlFor:"title",children:"Title"}),Object(B.jsx)("input",{ref:w,autoFocus:!0,className:"p-1 mt-1 outline-none",id:"title",type:"text",placeholder:"Amazing title...",onBlur:function(){k(f.validName(w.current.value))}}),!m&&Object(B.jsx)("p",{className:"text-red-500",children:"Please provide title"})]}),Object(B.jsxs)("div",{className:"flex flex-col mt-2",children:[Object(B.jsx)("label",{htmlFor:"about",children:"About"}),Object(B.jsx)("textarea",{ref:y,className:"p-1 mt-1 outline-none",id:"about",type:"text",placeholder:"Exciting stuff...",rows:"15",onBlur:function(){k(f.validAbout(y.current.value))}}),!O&&Object(B.jsx)("p",{className:"text-red-500",children:"Please provide blog detail"})]}),Object(B.jsxs)("div",{className:"flex flex-col mt-2",children:[Object(B.jsx)("label",{htmlFor:"file",children:"Upload (Optional) "}),Object(B.jsx)("input",{className:"p-1 mt-1 outline-none",id:"file",type:"file",name:"file",accept:"image/*",onInput:E}),p&&Object(B.jsx)("p",{className:"text-red-500",children:p}),c>0&&Object(B.jsxs)("p",{className:"text-blue-600",children:[Object(B.jsx)("span",{children:c<100?"Uploading ":"Uploaded "}),Object(B.jsx)("span",{className:"text-green-500",children:c}),"%"]})]}),Object(B.jsx)(L,{onClick:F,className:"mt-2 bg-gray-700",children:"Post"})]})},se=function(){return Object(B.jsx)(P,{children:Object(B.jsx)(re,{})})},le=function(){var e,t,n=Object(r.b)(),c=Object(r.c)((function(e){return e.request.isLoading})),a=Object(r.c)((function(e){return e.request.data})),s=null===a||void 0===a||null===(e=a.data)||void 0===e||null===(t=e.blogs)||void 0===t?void 0:t.map((function(e){return Object(B.jsx)(q,{id:e._id,author:e.author.name,title:e.title,updatedAt:e.updatedAt,about:e.about},e._id)}));return Object(N.useEffect)((function(){n(h("GET","/api/v1/users/myBlogs"))}),[n]),Object(B.jsxs)(P,{children:[Object(B.jsx)("h2",{className:"mt-2 ml-4 text-lg font-bold",children:"My Blogs"}),c&&Object(B.jsx)(_,{}),0===(null===s||void 0===s?void 0:s.length)&&Object(B.jsx)("p",{className:"text-xl text-center text-blue-600",children:"Seems you don't have any blog. Create One!"}),s]})},oe=new j.a,ie=function(e){var t=Object(S.g)(),n=Object(N.useState)(0),c=Object(I.a)(n,2),a=c[0],r=c[1],s=Object(N.useRef)(),l=Object(N.useRef)(),u=Object(N.useRef)(),d=Object(N.useRef)(),j=Object(N.useRef)(),b=Object(N.useRef)(),p=e.name,x=e.email,m=e.photo,h=Object(N.useState)(m),O=Object(I.a)(h,2),f=O[0],v=O[1],g=oe.get("jwt"),w=function(){var e=Object(i.a)(o.a.mark((function e(t){var n,c,a,s,l,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target.files[0],(c=new FormData).append("file",n),e.prev=3,e.next=6,A.post("/api/v1/upload",c,{headers:{authorization:"Bearer ".concat(g)},onUploadProgress:function(e){var t=e.loaded,n=e.total,c=Math.floor(100*t/n);c<86&&r(c)}});case 6:l=e.sent,console.log(l),r(100),v(null===l||void 0===l||null===(a=l.data)||void 0===a||null===(s=a.data)||void 0===s?void 0:s.url),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(3),i=e.t0.response.data.message,alert(i);case 16:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Object(i.a)(o.a.mark((function e(n){var c,a,r,i,u,d,j;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),c=s.current.value,a=l.current.value,r=f,e.prev=4,e.next=7,A.patch("/api/v1/users/updateMe",{name:c,email:a,photo:r},{headers:{authorization:"Bearer ".concat(g)}});case 7:d=e.sent,localStorage.setItem("user",JSON.stringify(null===d||void 0===d||null===(i=d.data)||void 0===i||null===(u=i.data)||void 0===u?void 0:u.user)),setTimeout((function(){t.push("/")}),1500),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(4),j=e.t0.response.data.message,alert(j);case 16:case"end":return e.stop()}}),e,null,[[4,12]])})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=Object(i.a)(o.a.mark((function e(t){var n,c,a,r,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=d.current.value,c=j.current.value,a=b.current.value,e.prev=4,e.next=7,A.post("/api/v1/users/updatePassword",{passwordCurrent:n,password:c,passwordConfirm:a},{headers:{authorization:"Bearer ".concat(g)}});case 7:r=e.sent,console.log(r),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(4),s=e.t0.response.data.message,alert(s);case 15:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(t){return e.apply(this,arguments)}}();return Object(B.jsxs)(k.a.Fragment,{children:[Object(B.jsxs)("form",{onSubmit:y,className:"flex flex-col w-10/12 mx-auto mt-10",children:[Object(B.jsx)("input",{ref:s,className:"p-2 mb-2 rounded-lg",id:"name",type:"text",defaultValue:p}),Object(B.jsx)("input",{ref:l,className:"p-2 mb-2 rounded-lg",id:"email",type:"email",defaultValue:x}),Object(B.jsxs)("div",{className:"grid grid-cols-2 grid-rows-2 gap-y-2",children:[Object(B.jsx)(C.a,{className:"w-16 h-16 rounded-full",cloudName:"ds9vpuvdm",secure:"true",publicId:m,type:"fetch",alt:"user-img"}),Object(B.jsx)("label",{htmlFor:"photo",className:"h-10 col-start-2 col-end-3 row-start-1 row-end-2 py-2 mt-3 text-sm text-center bg-gray-600 link",children:"Upload Photo"}),Object(B.jsx)("input",{ref:u,className:"w-11/12 col-start-1 col-end-3 row-start-2",id:"file",type:"file",onInput:w}),a>0&&Object(B.jsxs)("p",{children:[Object(B.jsx)("span",{className:"text-blue-600",children:a<100?"Uploading ":"Uploaded "}),Object(B.jsxs)("span",{className:"text-green-600",children:[a,"%"]})," "]})]}),Object(B.jsx)("button",{className:"text-white bg-gray-700",children:"Update Profile"})]}),Object(B.jsxs)("form",{onSubmit:L,className:"flex flex-col w-10/12 mx-auto mt-5",children:[Object(B.jsx)("div",{className:"mb-4",children:"Update Password"}),Object(B.jsx)("input",{ref:d,className:"p-2 mb-2 rounded-lg",id:"current-password",type:"password",placeholder:"current password",minLength:8}),Object(B.jsx)("input",{ref:j,className:"p-2 mb-2 rounded-lg",id:"password",type:"password",placeholder:"new-password",minLength:8}),Object(B.jsx)("input",{ref:b,className:"p-2 mb-2 rounded-lg",id:"password-confirm",type:"password",placeholder:"password confirm",minLength:8}),Object(B.jsx)("button",{className:"text-white bg-gray-600",children:"Update"})]})]})},ue=function(){var e,t=Object(r.b)(),n=Object(r.c)((function(e){return e.request.isLoading})),c=Object(r.c)((function(e){return e.request.data})),a=null===c||void 0===c||null===(e=c.data)||void 0===e?void 0:e.user;return Object(N.useEffect)((function(){t(h("GET","/api/v1/users/getMe"))}),[t]),Object(B.jsxs)(P,{children:[Object(B.jsx)("h2",{className:"mt-2 ml-4 text-lg font-bold",children:"My Profile"}),n&&Object(B.jsx)(_,{}),Object(B.jsx)(ie,{name:null===a||void 0===a?void 0:a.name,email:null===a||void 0===a?void 0:a.email,photo:null===a||void 0===a?void 0:a.photo})]})},de=new j.a,je=function(e){var t=Object(S.g)(),n=Object(N.useState)(0),c=Object(I.a)(n,2),a=c[0],s=c[1],l=Object(N.useState)(null),u=Object(I.a)(l,2),d=u[0],j=u[1],b=Object(N.useState)(null),p=Object(I.a)(b,2),x=p[0],m=p[1],O=Object(r.c)((function(e){return e.form.inputIsValid})),v=Object(r.c)((function(e){return e.form.aboutIsValid})),g=Object(N.useRef)(),w=Object(N.useRef)(),y=Object(N.useRef)(),k=Object(r.b)(),C=e.title,E=e.about,F=e.blogId,P=e.imageBlog,T=O&&v,V=function(){var e=Object(i.a)(o.a.mark((function e(t){var n,c,a,r,l,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=de.get("jwt"),c=t.target.files[0],(a=new FormData).append("file",c),e.prev=5,e.next=8,A.post("/api/v1/upload",a,{headers:{authorization:"Bearer ".concat(n)},onUploadProgress:function(e){var t=e.loaded,n=e.total,c=Math.floor(100*t/n);c<100&&s(c)}});case 8:i=e.sent,m(null),s(100),j(null===i||void 0===i||null===(r=i.data)||void 0===r||null===(l=r.data)||void 0===l?void 0:l.url),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(5),console.log(e.t0.response),m(e.t0.response.data.message);case 18:case"end":return e.stop()}}),e,null,[[5,14]])})));return function(t){return e.apply(this,arguments)}}(),D=function(e){if(e.preventDefault(),T){console.log("Form is valid");var n=g.current.value;"design"===n&&(n="ui-ux");var c=w.current.value,a=y.current.value,r=P;d&&(r=d),k(h("PATCH","/api/v1/blogs/".concat(F),{blogType:n,title:c,about:a,image:r})),setTimeout((function(){t.replace("/")}),2e3)}};return Object(B.jsxs)("form",{onSubmit:D,className:"w-10/12 mx-auto mt-2",children:[Object(B.jsxs)("div",{children:[Object(B.jsx)("label",{htmlFor:"type",children:"Blog Type: "}),Object(B.jsxs)("select",{ref:g,id:"type",children:[Object(B.jsx)("option",{value:"technology",children:"Technology"}),Object(B.jsx)("option",{value:"mern",children:"MERN"}),Object(B.jsx)("option",{value:"design",children:"Design"}),Object(B.jsx)("option",{value:"sports",children:"Sports"}),Object(B.jsx)("option",{value:"entertainment",children:"Entertainment"}),Object(B.jsx)("option",{value:"fiction",children:"Fiction"})]})]}),Object(B.jsxs)("div",{className:"flex flex-col",children:[Object(B.jsx)("label",{htmlFor:"title",children:"Title"}),Object(B.jsx)("input",{ref:w,className:"p-1 mt-1 outline-none",id:"title",type:"text",defaultValue:C,onBlur:function(){k(f.validName(w.current.value))}}),!O&&Object(B.jsx)("p",{className:"text-red-500",children:"Please provide title"})]}),Object(B.jsxs)("div",{className:"flex flex-col mt-2",children:[Object(B.jsx)("label",{htmlFor:"about",children:"About"}),Object(B.jsx)("textarea",{ref:y,className:"p-1 mt-1 outline-none",id:"about",type:"text",defaultValue:E,rows:"15",onBlur:function(){k(f.validAbout(y.current.value))}}),!v&&Object(B.jsx)("p",{className:"text-red-500",children:"Please provide blog detail"})]}),Object(B.jsxs)("div",{className:"flex flex-col mt-2",children:[Object(B.jsx)("label",{htmlFor:"file",children:"Upload (Optional) "}),Object(B.jsx)("input",{className:"p-1 mt-1 outline-none",id:"file",type:"file",name:"file",accept:"image/*",onChange:V}),x&&Object(B.jsx)("p",{className:"text-red-500",children:x}),a>0&&Object(B.jsxs)("p",{className:"text-blue-600",children:[a<100?"Uploading":"Uploaded",Object(B.jsx)("span",{className:"text-green-500",children:a}),"%"]})]}),Object(B.jsx)(L,{onClick:D,className:"mt-2 bg-gray-700",children:"Post"})]})},be=function(){var e,t=Object(S.i)(),n=Object(r.c)((function(e){return e.request.isLoading})),c=Object(r.c)((function(e){return e.request.data})),a=Object(r.c)((function(e){return e.request.error})),s=Object(r.b)(),l=t.blogId,o=null===c||void 0===c||null===(e=c.data)||void 0===e?void 0:e.blog;return Object(N.useEffect)((function(){s(h("GET","/api/v1/blogs/".concat(l)))}),[s,l]),Object(B.jsxs)(P,{children:[n&&Object(B.jsx)(_,{}),a&&Object(B.jsx)("p",{className:"text-red-500",children:a}),Object(B.jsx)(je,{title:(null===o||void 0===o?void 0:o.title)||"",about:(null===o||void 0===o?void 0:o.about)||"",blogId:l,imageBlog:null===o||void 0===o?void 0:o.image})]})},pe=function(){return Object(B.jsx)(P,{children:Object(B.jsx)("h2",{className:"mt-20 ml-10 text-2xl text-red-500",children:"Oops! Page Not Found \ud83d\ude44"})})},xe=new j.a;var me=function(){var e=xe.get("jwt"),t=Object(r.c)((function(e){return e.auth.token}))||!!e;return Object(B.jsxs)(S.d,{children:[Object(B.jsx)(S.b,{exact:!0,path:"/",children:Object(B.jsx)(S.a,{to:"/blogs"})}),Object(B.jsx)(S.b,{exact:!0,path:"/blogs",children:Object(B.jsx)(J,{})}),Object(B.jsxs)(S.b,{exact:!0,path:"/blogs/:blogId",children:[t&&Object(B.jsx)(X,{}),!t&&Object(B.jsx)(S.a,{to:"/login"})]}),Object(B.jsx)(S.b,{exact:!0,path:"/signup",children:Object(B.jsx)(ee,{})}),Object(B.jsx)(S.b,{exact:!0,path:"/login",children:Object(B.jsx)(ce,{})}),Object(B.jsxs)(S.b,{exact:!0,path:"/blog-post",children:[t&&Object(B.jsx)(se,{}),!t&&Object(B.jsx)(S.a,{to:"/login"})]}),Object(B.jsxs)(S.b,{exact:!0,path:"/my-blogs",children:[t&&Object(B.jsx)(le,{}),!t&&Object(B.jsx)(S.a,{to:"/login"})]}),Object(B.jsxs)(S.b,{exact:!0,path:"/my-profile",children:[t&&Object(B.jsx)(ue,{}),!t&&Object(B.jsx)(S.a,{to:"/login"})]}),Object(B.jsxs)(S.b,{exact:!0,path:"/update-blog/:blogId",children:[t&&Object(B.jsx)(be,{}),!t&&Object(B.jsx)(S.a,{to:"/login"})]}),Object(B.jsx)(S.b,{exact:!0,path:"*",children:Object(B.jsx)(pe,{})})]})};a.a.render(Object(B.jsx)(y.a,{children:Object(B.jsx)(r.a,{store:w,children:Object(B.jsx)(me,{})})}),document.getElementById("root"))}},[[247,1,2]]]);
//# sourceMappingURL=main.315f99b4.chunk.js.map